<!doctype html>
<html lang="sv">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tannenhof Pro v1.0 ‚Äì Tidsrapport</title>
<link rel="icon" href="favicon.ico">
<style>
:root{
  --brand:#175D36;          /* Th√ºringer-gr√∂n */
  --ink:#0b2b19;
  --bg:#eef5f0;
  --card:#ffffff;
  --pill:#e7f2ec;
  --ring:#cfe6d8;
  --muted:#567466;
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--ink);font:500 16px/1.35 system-ui,-apple-system,Segoe UI,Roboto,Arial}
button{cursor:pointer}

/* Header */
.top{position:sticky;top:0;z-index:20;background:var(--brand);color:#fff;box-shadow:0 2px 10px rgba(0,0,0,.2)}
.top-inner{max-width:1200px;margin:auto;display:flex;align-items:center;gap:12px;padding:12px 14px}
.badge{width:36px;height:36px;border-radius:10px;background:#e9f3ee;overflow:hidden;display:grid;place-items:center}
.badge img{width:100%;height:100%;object-fit:cover}
.title{font-weight:800;letter-spacing:.2px}
.spacer{flex:1}
.btn{border:0;border-radius:14px;padding:10px 14px;font-weight:800;display:inline-flex;align-items:center;gap:8px;box-shadow:0 2px 6px rgba(0,0,0,.1)}
.btn.white{background:#fff;color:#0b2b19}
.btn.dark{background:#0e2318;color:#fff}

/* Wrap + summary */
.wrap{max-width:1200px;margin:16px auto;padding:0 12px}
.summary{background:var(--card);border-radius:18px;padding:12px;display:flex;gap:10px;align-items:center;box-shadow:0 4px 14px rgba(0,0,0,.06)}
.total{background:var(--pill);border-radius:12px;padding:10px 16px;font-weight:800;min-width:150px;text-align:center}
.chip{background:#fff;border:2px solid var(--ring);border-radius:12px;padding:10px 12px;font-weight:800}
.month{margin:18px 6px 8px;font-size:26px;font-weight:900;color:#1b2f22}

/* Grid-tabell ‚Äì fasta kolumnbredder */
.table{display:grid;gap:10px}
.thead,.row{
  display:grid;align-items:center;background:#fff;border-radius:18px;padding:8px 10px;
  grid-template-columns: 64px 100px 100px 80px 1fr 120px 140px 80px; /* Dag | Fr√•n | Till | Paus | Projekt | Anteckn | Foto | Sum */
  box-shadow:0 2px 10px rgba(0,0,0,.05)
}
.thead{position:sticky;top:64px;z-index:5;background:rgba(255,255,255,.95);backdrop-filter:blur(6px)}
.c{display:flex;align-items:center;gap:8px}
.daypill{width:44px;height:44px;border-radius:12px;background:var(--pill);display:grid;place-items:center;font-weight:900}
input[type="time"],input[type="number"],input[type="text"]{
  width:100%;height:44px;border:0;border-radius:12px;background:#f1f6f3;padding:0 10px;font-weight:800;color:#1b2f22;
  outline:2px solid transparent
}
input[type="time"]{font-variant-numeric:tabular-nums}
input:focus{outline-color:var(--ring);background:#fff}
.pillbtn{width:100%;height:44px;border-radius:12px;border:0;background:var(--pill);font-weight:800;color:#1b2f22}
.pillbtn.primary{background:color-mix(in srgb, var(--brand) 83%, white);color:#fff}
.sum{font-weight:900;text-align:right;padding-right:6px}

/* Flytande inst√§llningar (v√§nster, ej iv√§gen) */
.fab{position:fixed;left:16px;bottom:96px;width:64px;height:64px;border-radius:18px;background:var(--brand);
     box-shadow:0 8px 22px rgba(0,0,0,.25);display:grid;place-items:center;color:#fff;font-size:28px;z-index:40}
.sheet{position:fixed;left:16px;bottom:168px;background:#fff;border-radius:16px;padding:10px;box-shadow:0 10px 28px rgba(0,0,0,.25);
       display:none;flex-direction:column;gap:8px;z-index:50;min-width:280px}
.sheet.open{display:flex}
.sheet button,.sheet label{all:unset;display:block;background:#f4faf6;padding:10px 12px;border-radius:12px;font-weight:700;margin:0;cursor:pointer}
.sheet input[type="range"]{width:100%}
.sheet .warn{background:#ffecec;color:#7a1111}

/* Debug */
.debug{position:fixed;left:12px;right:12px;bottom:12px;background:var(--brand);color:#e9f5ee;border-radius:16px;padding:10px;z-index:30;display:none}
.debug.open{display:block}
.debug h3{margin:0 0 8px 0;font-size:16px;display:flex;justify-content:space-between;align-items:center}
.debug pre{margin:0;max-height:140px;overflow:auto;background:#0f2a1e;color:#c8f1dc;padding:10px;border-radius:10px}

/* Watermark */
.watermark{position:fixed;right:18px;bottom:18px;opacity:.7;z-index:1;pointer-events:none}
.watermark img{width:220px;height:auto;object-fit:contain;filter:grayscale(10%) contrast(90%)}

/* Kamera-aktionsmeny (per rad) */
.actionsheet{
  position:fixed;left:50%;transform:translateX(-50%);bottom:88px;background:#fff;border-radius:16px;box-shadow:0 12px 30px rgba(0,0,0,.25);
  display:none;flex-direction:column;gap:8px;z-index:60;min-width:260px;padding:10px
}
.actionsheet.open{display:flex}
.actionsheet button{all:unset;background:#f4faf6;padding:10px 12px;border-radius:12px;font-weight:800;cursor:pointer}

/* Foto-galleri-modal */
.modal{
  position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;z-index:70
}
.modal.open{display:flex}
.modal-card{background:#fff;border-radius:16px;max-width:92vw;max-height:86vh;overflow:auto;padding:12px;box-shadow:0 12px 30px rgba(0,0,0,.35)}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px}
.grid img{width:100%;height:120px;object-fit:cover;border-radius:10px}

/* Signatur (sm√• knappar ‚Üí stor canvas) */
.signatures{max-width:1200px;margin:0 auto 140px;padding:10px;display:flex;gap:10px;justify-content:flex-end}
.signbtn{border:2px dashed var(--ring);background:#fff;border-radius:12px;padding:10px 12px;font-weight:800}
.sig-modal .canvas{width:90vw;max-width:720px;height:50vh;background:#fff;border:2px solid var(--ring);border-radius:12px}

/* Print */
@media print{
  .fab,.sheet,.debug,.actionsheet,.modal{display:none !important}
  .top{box-shadow:none}
  body{background:#fff}
  .thead{top:0}
}
</style>
</head>
<body>
  <!-- HEADER -->
  <div class="top">
    <div class="top-inner">
      <div class="badge"><img id="headerLogo" alt=""></div>
      <div class="title">Th√ºringer Tannenhof ‚Äì Tidsrapport</div>
      <div class="spacer"></div>
      <button class="btn white" id="shareBtn">Dela / Skicka</button>
      <button class="btn dark" id="pdfBtn">PDF</button>
    </div>
  </div>

  <div class="wrap">
    <div class="summary">
      <div class="total">Totalt ‚Äì <span id="totalHours">0.00</span></div>
      <button class="chip" id="prevMonth">¬´</button>
      <button class="chip" id="nextMonth">¬ª</button>
      <div class="spacer"></div>
      <button class="btn" id="clearMonth">Rensa denna m√•nad</button>
    </div>

    <div class="month" id="monthTitle"></div>

    <div class="table">
      <div class="thead">
        <div class="c">Dag</div>
        <div class="c">Fr√•n</div>
        <div class="c">Till</div>
        <div class="c">Paus</div>
        <div class="c">Projekt/plats</div>
        <div class="c">Anteckning</div>
        <div class="c">Foto</div>
        <div class="c" style="justify-content:end;">Sum</div>
      </div>
      <div id="rows"></div>
    </div>
  </div>

  <!-- Signaturknappar -->
  <div class="signatures">
    <button class="signbtn" id="sigEmpBtn">‚úçÔ∏è Signera Medarbetare</button>
    <button class="signbtn" id="sigBossBtn">‚úçÔ∏è Signera Chef</button>
  </div>

  <!-- INST√ÑLLNINGAR (v√§nster, ovanf√∂r sista rader) -->
  <div class="fab" id="fab" title="Inst√§llningar">‚öôÔ∏è</div>
  <div class="sheet" id="sheet">
    <label id="pickLogo">V√§lj logga (PNG/JPG)
      <input id="logoInput" type="file" accept="image/*" style="display:none">
    </label>
    <button id="pickBrand">V√§lj f√∂retagsgr√∂n (HEX)</button>
    <div style="background:#f7fbf8;padding:10px 12px;border-radius:12px">
      <div style="font-weight:800;margin-bottom:6px">Vattenst√§mpel</div>
      <label style="display:flex;align-items:center;gap:10px">
        Synlig <input type="checkbox" id="wmToggle" style="transform:scale(1.2)">
      </label>
      <div style="margin-top:8px;font-weight:700">Genomskinlighet: <span id="wmVal">70%</span></div>
      <input type="range" id="wmRange" min="0" max="100" value="70">
    </div>
    <button id="toggleDebug">Visa/D√∂lj fels√∂kning</button>
    <button class="warn" id="resetAll">Rensa ALLT (alla m√•nader)</button>
  </div>

  <!-- FOTO-AKTIONSMENY -->
  <div class="actionsheet" id="camSheet">
    <button data-act="view">üëÄ Titta</button>
    <button data-act="gallery">üñºÔ∏è Galleri</button>
    <button data-act="camera">üì∑ Kamera</button>
  </div>

  <!-- FOTO-GALLERI -->
  <div class="modal" id="galleryModal">
    <div class="modal-card">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <h3 style="margin:0">Dagens foton</h3>
        <div style="display:flex;gap:8px">
          <button class="btn" id="closeGallery">St√§ng</button>
          <button class="btn" id="clearGallery">Rensa foton</button>
        </div>
      </div>
      <div class="grid" id="galleryGrid"></div>
    </div>
  </div>

  <!-- SIGNATURMODAL -->
  <div class="modal sig-modal" id="sigModal">
    <div class="modal-card">
      <h3 id="sigTitle" style="margin-top:0">Signera</h3>
      <canvas id="sigCanvas" class="canvas"></canvas>
      <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:10px">
        <button class="btn" id="sigClear">Rensa</button>
        <button class="btn" id="sigCancel">Avbryt</button>
        <button class="btn dark" id="sigSave">Spara</button>
      </div>
    </div>
  </div>

  <!-- DEBUG -->
  <div class="debug" id="debug">
    <h3>Fels√∂kning
      <span>
        <button class="btn" id="foldDbg" style="padding:6px 10px;font-size:12px">F√§ll in</button>
        <button class="btn" id="clearDbg" style="padding:6px 10px;font-size:12px">Rensa</button>
      </span>
    </h3>
    <pre id="dbgLog"></pre>
  </div>

  <!-- WATERMARK -->
  <div class="watermark" id="wm"><img id="wmImg" alt=""></div>

<script>
(function(){
  const $=s=>document.querySelector(s);
  const LS=(k)=>`tnh:${k}`;
  const log=(...a)=>{ const s='['+new Date().toLocaleTimeString()+'] '+a.join(' ')+'\\n'; const el=$('#dbgLog'); el.textContent+=s; el.scrollTop=el.scrollHeight; };

  let current=new Date(); current.setDate(1);

  const daysIn=(y,m)=> new Date(y,m+1,0).getDate();
  const fmtMonth=(d)=> d.toLocaleDateString('sv-SE',{year:'numeric',month:'long'});

  function keyMonth(y,m){ return LS(`${y}-${String(m+1).padStart(2,'0')}`); }
  function loadMonth(y,m){ const raw=localStorage.getItem(keyMonth(y,m)); return raw?JSON.parse(raw):null; }
  function saveMonth(y,m,data){ localStorage.setItem(keyMonth(y,m), JSON.stringify(data)); }

  function build(){
    const y=current.getFullYear(), m=current.getMonth();
    $('#monthTitle').textContent=fmtMonth(current);
    const n=daysIn(y,m);
    const data=loadMonth(y,m)||Array.from({length:n},()=>({from:'',to:'',pause:0,proj:'',note:'',photos:[],sum:0}));
    const rows=$('#rows'); rows.innerHTML='';
    for(let i=0;i<n;i++){
      const r=data[i];
      const row=document.createElement('div'); row.className='row'; row.dataset.i=i;
      row.innerHTML=`
        <div class="c"><div class="daypill">${i+1}</div></div>
        <div class="c"><input type="time" value="${r.from||''}" data-k="from"></div>
        <div class="c"><input type="time" value="${r.to||''}" data-k="to"></div>
        <div class="c"><input type="number" min="0" step="5" value="${r.pause||0}" data-k="pause"></div>
        <div class="c"><input type="text" placeholder="Projekt/plats" value="${r.proj||''}" data-k="proj"></div>
        <div class="c"><button class="pillbtn" data-act="note">üìù Anteckning</button></div>
        <div class="c"><button class="pillbtn primary" data-act="photo">üì∑ Foto</button></div>
        <div class="c sum" id="sum-${i}">${(r.sum||0).toFixed(2)}</div>
      `;
      rows.appendChild(row);
    }
    calcAndSave();
    log('Laddade', y+'-'+String(m+1).padStart(2,'0'), '(',n,'rader)');
  }

  function diffHours(a,b){
    if(!a||!b) return 0;
    const [ah,am]=a.split(':').map(Number), [bh,bm]=b.split(':').map(Number);
    let x=bh+bm/60-(ah+am/60); if(x<0) x+=24; return Math.max(0,x);
  }
  function calcAndSave(){
    const y=current.getFullYear(), m=current.getMonth();
    const n=daysIn(y,m);
    const data=loadMonth(y,m)||Array.from({length:n},()=>({from:'',to:'',pause:0,proj:'',note:'',photos:[],sum:0}));
    let total=0;
    [...$('#rows').children].forEach((row,i)=>{
      const inputs=row.querySelectorAll('input');
      inputs.forEach(inp=>{
        const k=inp.dataset.k;
        data[i][k]= (inp.type==='number')? Number(inp.value||0) : (inp.value||'');
      });
      const h= diffHours(data[i].from, data[i].to) - (data[i].pause||0)/60;
      data[i].sum = Math.max(0, Number(h.toFixed(2)));
      $('#sum-'+i).textContent = data[i].sum.toFixed(2);
      total += data[i].sum;
    });
    $('#totalHours').textContent = total.toFixed(2);
    saveMonth(y,m,data);
  }

  // --- Events i tabellen
  $('#rows').addEventListener('input', (e)=>{ if(e.target.matches('input')) calcAndSave(); });
  let camRowIndex=null;

  $('#rows').addEventListener('click',(e)=>{
    const row=e.target.closest('.row'); if(!row) return;
    const i=Number(row.dataset.i);
    const y=current.getFullYear(), m=current.getMonth();
    const data=loadMonth(y,m)||[];
    if(e.target.dataset.act==='note'){
      const v=prompt('Anteckning f√∂r dag '+(i+1), data[i]?.note||'') ?? '';
      (data[i] ||= {from:'',to:'',pause:0,proj:'',note:'',photos:[],sum:0}).note = v;
      saveMonth(y,m,data); log('Note sparad rad', i+1);
    }
    if(e.target.dataset.act==='photo'){
      camRowIndex=i;
      openCamSheet();
    }
  });

  // --- Kamera-aktionsmeny
  const camSheet=$('#camSheet');
  function openCamSheet(){ camSheet.classList.add('open'); }
  function closeCamSheet(){ camSheet.classList.remove('open'); }

  // Hj√§lpinputs f√∂r Galleri vs Kamera
  const fileGallery=document.createElement('input');
  fileGallery.type='file'; fileGallery.accept='image/*'; // √∂ppnar galleri
  const fileCamera=document.createElement('input');
  fileCamera.type='file'; fileCamera.accept='image/*'; fileCamera.capture='environment'; // √∂ppnar kameran

  fileGallery.onchange=()=>handlePicked(fileGallery.files);
  fileCamera.onchange=()=>handlePicked(fileCamera.files);

  async function handlePicked(files){
    if(!files||!files.length||camRowIndex==null) return;
    const y=current.getFullYear(), m=current.getMonth();
    const data=loadMonth(y,m)||[];
    for(const f of files){
      const b64 = await toDataURL(f);
      (data[camRowIndex].photos ||= []).push(b64);
    }
    saveMonth(y,m,data);
    log('Foto tillagd rad', camRowIndex+1, 'antal:', files.length);
    camRowIndex=null; closeCamSheet();
  }
  function toDataURL(file){
    return new Promise((res,rej)=>{ const r=new FileReader(); r.onload=()=>res(r.result); r.onerror=rej; r.readAsDataURL(file); });
  }

  camSheet.addEventListener('click',(e)=>{
    if(!e.target.matches('button')) return;
    const act=e.target.dataset.act;
    if(camRowIndex==null){ closeCamSheet(); return; }
    const y=current.getFullYear(), m=current.getMonth();
    const data=loadMonth(y,m)||[];
    if(act==='view'){
      const photos=(data[camRowIndex]?.photos)||[];
      const grid=$('#galleryGrid'); grid.innerHTML='';
      photos.forEach((p,idx)=>{
        const img=document.createElement('img'); img.src=p; img.title='Foto '+(idx+1);
        grid.appendChild(img);
      });
      $('#galleryModal').classList.add('open');
      closeCamSheet();
    }else if(act==='gallery'){
      fileGallery.click();
    }else if(act==='camera'){
      fileCamera.click();
    }
  });

  // Galleri-modal
  $('#closeGallery').onclick=()=> $('#galleryModal').classList.remove('open');
  $('#clearGallery').onclick=()=>{
    if(camRowIndex==null){ $('#galleryModal').classList.remove('open'); return; }
    const y=current.getFullYear(), m=current.getMonth();
    const data=loadMonth(y,m)||[];
    if(confirm('Rensa alla foton f√∂r denna dag?')){
      (data[camRowIndex].photos ||= []).length=0;
      saveMonth(y,m,data);
      $('#galleryGrid').innerHTML='';
      log('Rensade foton f√∂r rad', camRowIndex+1);
    }
  };

  // M√•nadsknappar
  $('#prevMonth').onclick=()=>{ current.setMonth(current.getMonth()-1); build(); };
  $('#nextMonth').onclick=()=>{ current.setMonth(current.getMonth()+1); build(); };
  $('#clearMonth').onclick=()=>{
    if(!confirm('Rensa denna m√•nads data?')) return;
    localStorage.removeItem(keyMonth(current.getFullYear(),current.getMonth()));
    build();
  };

  // Inst√§llningar
  $('#fab').onclick=()=> $('#sheet').classList.toggle('open');
  $('#pickBrand').onclick=()=>{
    const cur=getComputedStyle(document.documentElement).getPropertyValue('--brand').trim();
    const hex=prompt('HEX f√∂r f√∂retagsgr√∂n (t.ex. #175D36):', cur||'#175D36');
    if(hex && /^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(hex)){
      document.documentElement.style.setProperty('--brand', hex.trim());
      localStorage.setItem(LS('brand'), hex.trim());
      log('Bytte brand till', hex.trim());
    }else if(hex){ alert('Ogiltig HEX.'); }
  };
  $('#pickLogo').onclick=()=> $('#logoInput').click();
  $('#logoInput').onchange=()=>{
    const f=$('#logoInput').files?.[0]; if(!f) return;
    const r=new FileReader();
    r.onload=()=>{
      const b64=r.result;
      localStorage.setItem(LS('logo'), b64);
      $('#headerLogo').src=b64; $('#wmImg').src=b64;
      log('Uppdaterade logga.');
    };
    r.readAsDataURL(f);
  };

  const wmToggle=$('#wmToggle'), wmRange=$('#wmRange'), wmVal=$('#wmVal'), wm=$('#wm');
  function applyWM(){
    const on = localStorage.getItem(LS('wm'))!=='off';
    wmToggle.checked = on;
    wm.style.display = on? 'block':'none';
    const pct = Number(localStorage.getItem(LS('wmOpacity'))||'70');
    wmRange.value=String(pct); wmVal.textContent=pct+'%';
    $('#wm').style.opacity = pct/100;
  }
  wmToggle.onchange=()=>{ localStorage.setItem(LS('wm'), wmToggle.checked?'on':'off'); applyWM(); };
  wmRange.oninput=()=>{ localStorage.setItem(LS('wmOpacity'), wmRange.value); applyWM(); };

  // Debug
  const dbg=$('#debug');
  $('#toggleDebug').onclick=()=>{ const on=dbg.classList.toggle('open'); localStorage.setItem(LS('dbg'), on?'on':'off'); };
  $('#foldDbg').onclick=()=>{ dbg.classList.remove('open'); localStorage.setItem(LS('dbg'),'off'); };
  $('#clearDbg').onclick=()=> $('#dbgLog').textContent='';

  // Share / PDF
  $('#shareBtn').onclick=async ()=>{
    try{
      if(navigator.share){ await navigator.share({title:document.title,url:location.href}); log('Delade via Web Share'); }
      else { await navigator.clipboard.writeText(location.href); alert('L√§nk kopierad.'); log('Kopierade l√§nk'); }
    }catch{ log('Delning avbruten'); }
  };
  $('#pdfBtn').onclick=()=>{ window.print(); };

  // Signaturer
  let sigTarget='emp'; // 'emp' | 'boss'
  const sigModal=$('#sigModal'), canvas=$('#sigCanvas'); let ctx, drawing=false, last={x:0,y:0};
  function resizeCanvas(){
    const dpr=window.devicePixelRatio||1; const r=canvas.getBoundingClientRect();
    canvas.width=r.width*dpr; canvas.height=r.height*dpr;
    ctx=canvas.getContext('2d'); ctx.scale(dpr,dpr); ctx.lineWidth=3; ctx.lineCap='round'; ctx.strokeStyle='#111';
    ctx.fillStyle='#fff'; ctx.fillRect(0,0,r.width,r.height);
  }
  window.addEventListener('resize', ()=>{ if(sigModal.classList.contains('open')) resizeCanvas(); });
  function openSig(which){
    sigTarget=which; $('#sigTitle').textContent = which==='emp'?'Signera ‚Äì Medarbetare':'Signera ‚Äì Chef';
    sigModal.classList.add('open'); setTimeout(resizeCanvas,0);
  }
  function closeSig(){ sigModal.classList.remove('open'); }
  function pos(e){ const r=canvas.getBoundingClientRect(); const x=(e.touches?e.touches[0].clientX:e.clientX)-r.left; const y=(e.touches?e.touches[0].clientY:e.clientY)-r.top; return {x,y}; }
  function start(e){ drawing=true; last=pos(e); e.preventDefault(); }
  function move(e){ if(!drawing) return; const p=pos(e); ctx.beginPath(); ctx.moveTo(last.x,last.y); ctx.lineTo(p.x,p.y); ctx.stroke(); last=p; e.preventDefault(); }
  function end(){ drawing=false; }
  canvas.addEventListener('mousedown',start); canvas.addEventListener('mousemove',move); canvas.addEventListener('mouseup',end); canvas.addEventListener('mouseleave',end);
  canvas.addEventListener('touchstart',start,{passive:false}); canvas.addEventListener('touchmove',move,{passive:false}); canvas.addEventListener('touchend',end);

  $('#sigEmpBtn').onclick=()=> openSig('emp');
  $('#sigBossBtn').onclick=()=> openSig('boss');
  $('#sigClear').onclick=()=> resizeCanvas();
  $('#sigCancel').onclick=()=> closeSig();
  $('#sigSave').onclick=()=>{
    const dataUrl=canvas.toDataURL();
    localStorage.setItem(LS(sigTarget==='emp'?'signEmp':'signBoss'), dataUrl);
    closeSig(); log('Sign sparad', sigTarget);
  };

  // Boot
  (function init(){
    // brand
    const brand=localStorage.getItem(LS('brand')); if(brand){ document.documentElement.style.setProperty('--brand', brand); }
    // logo
    const logo=localStorage.getItem(LS('logo'));
    if(logo){ $('#headerLogo').src=logo; $('#wmImg').src=logo; }
    applyWM();
    if(localStorage.getItem(LS('dbg'))==='on') $('#debug').classList.add('open');
    build();
    // ge extra underspalt s√• FAB inte t√§cker sista rader
    document.body.style.paddingBottom='140px';
    log('App start OK. M√•nad:', current.toISOString().slice(0,7));
  })();

})();
</script>
</body>
</html>
