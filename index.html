<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Th√ºringer Tannenhof ‚Äì Tidstabell</title>
<style>
  :root{
    --primary:#195c37; /* byts av tema/egna f√§rger */
    --primary-2:#0f3e26;
    --card:#eaf5ef;
    --ink:#0d261a;
    --ok:#116149;
    --danger:#b3261e;
  }
  [data-theme="camo"]{
    --primary:#2e4732;
    --primary-2:#1e2f22;
    --card:#e7efe9;
    --ink:#162219;
    --ok:#355c3e;
  }
  html,body{margin:0;background:#f7faf8;color:var(--ink);font:16px system-ui, -apple-system, Segoe UI, Roboto, Arial;}
  .top{position:sticky;top:0;z-index:10;background:linear-gradient(180deg,var(--primary),var(--primary-2));color:#fff;padding:10px 12px;display:flex;align-items:center;gap:12px}
  .brand{display:flex;align-items:center;gap:10px;min-width:0}
  .brand .logo{width:28px;height:28px;border-radius:6px;background:#fff url('') center/cover no-repeat;box-shadow:inset 0 0 0 2px rgba(0,0,0,.05)}
  .brand h1{font-size:16px;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .toolbar{margin-left:auto;display:flex;gap:10px}
  .btn{background:#fff;color:#111;border-radius:14px;padding:10px 14px;font-weight:700;border:none;box-shadow:0 6px 18px rgba(0,0,0,.15);display:inline-flex;gap:8px;align-items:center}
  .btn.dark{background:#111;color:#fff}
  .wrap{padding:12px}
  .panel{background:var(--card);border-radius:16px;padding:14px 16px;box-shadow:0 10px 24px rgba(0,0,0,.08)}
  .sumrow{display:flex;align-items:center;justify-content:space-between}
  .table{margin-top:14px;background:#fff;border-radius:16px;overflow:hidden;box-shadow:0 8px 24px rgba(0,0,0,.06)}
  .thead,.row{display:grid;grid-template-columns:72px 1fr 1fr 110px 74px;gap:12px;align-items:center}
  .thead{position:sticky;top:64px;background:#e6f2ea;border-bottom:2px solid #d8e8df;z-index:5;padding:10px 12px;font-weight:800}
  .row{padding:10px 12px;border-bottom:1px solid #eef3f0}
  .cell{background:#f0f6f2;border-radius:14px;padding:12px 14px;display:flex;align-items:center;gap:10px;min-height:44px}
  .day{justify-content:center;font-weight:800;background:#eaf5ef}
  .time{cursor:pointer}
  .time input{all:unset;width:64px;text-align:center;font-variant-numeric:tabular-nums}
  .total{font-weight:800;background:#eff6f2}
  .act{display:flex;gap:10px}
  .iconbtn{width:48px;height:48px;border-radius:14px;background:var(--primary);display:grid;place-items:center;box-shadow:0 6px 16px rgba(0,0,0,.18);border:none}
  .iconbtn svg{fill:#fff}
  .chip{background:#fff;border-radius:12px;padding:6px 10px;box-shadow:0 3px 10px rgba(0,0,0,.08)}
  .floating{position:fixed;left:18px;bottom:18px;z-index:30}
  .settings{width:64px;height:64px;border-radius:18px;background:var(--primary);display:grid;place-items:center;box-shadow:0 10px 24px rgba(0,0,0,.28);border:none}
  .padBottom{height:110px} /* s√• sista raden inte d√∂ljs */
  /* dialog */
  dialog{border:none;border-radius:18px;box-shadow:0 30px 80px rgba(0,0,0,.35);padding:0}
  .dlg{padding:18px;min-width:300px;background:#fff;border-radius:18px}
  .dlg h2{margin:0 0 10px 0}
  .grid{display:grid;gap:10px}
  label .hint{opacity:.7;font-size:12px}
  select,input[type="text"],input[type="range"],input[type="color"]{width:100%;padding:10px;border-radius:12px;border:1px solid #dbe6df;background:#f8fbf9}
  .rowhead{display:flex;align-items:center;gap:10px}
  .wm{position:fixed;right:18px;bottom:86px;opacity:.3;pointer-events:none;z-index:0;mix-blend-mode:multiply}
  .wm img{max-width:280px;max-height:180px;opacity:var(--wmalpha,0.3);filter:grayscale(25%)}
  .today{outline:3px solid var(--ok)}
  /* projekt-knapp */
  .proj{cursor:text}
  .proj .pin{font-size:18px}
  /* meny till kamera */
  .menu{padding:8px 6px}
  .menu button{display:block;width:100%;text-align:left;padding:12px;border:none;background:#fff}
  .menu button+button{border-top:1px solid #eef3f0}
</style>
</head>
<body data-theme="green">
  <div class="top">
    <div class="brand">
      <div class="logo" id="brandLogo"></div>
      <h1 id="brandTitle">Th√ºringer Tannenhof ‚Äì Tidstabell</h1>
    </div>
    <div class="toolbar">
      <button class="btn" id="shareBtn">üéÇ Dela / Skicka</button>
      <button class="btn dark" id="pdfBtn">üñ®Ô∏è PDF</button>
    </div>
  </div>

  <div class="wrap">
    <div class="panel">
      <div class="sumrow">
        <div class="rowhead"><span>‚è≥</span><div id="sumTitle">Totalt ‚Äì</div></div>
        <div class="chip"><span id="sumHours">0.00</span></div>
      </div>
    </div>

    <div class="table" id="table">
      <div class="thead" id="thead">
        <div id="thDay">Dag</div>
        <div id="thFrom">Fr√•n</div>
        <div id="thTo">Till</div>
        <div id="thBreak">‚òï Paus</div>
        <div>Totalt</div>
      </div>
      <div id="rows"></div>
    </div>
    <div class="padBottom"></div>
  </div>

  <!-- vattenst√§mpel -->
  <div class="wm" id="wm"><img id="wmImg" alt=""></div>

  <!-- inst√§llningar -->
  <div class="floating">
    <button class="settings" id="openSettings" aria-label="Inst√§llningar">
      <svg width="28" height="28" viewBox="0 0 24 24" fill="none"><path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Z"/><path d="M19.4 13a7.7 7.7 0 0 0 .05-2l2-1.55a.5.5 0 0 0 .1-.68l-1.9-3.29a.5.5 0 0 0-.64-.2l-2.35.95a7.8 7.8 0 0 0-1.73-1l-.35-2.54a.5.5 0 0 0-.5-.43h-3.8a.5.5 0 0 0-.5.43l-.35 2.54a7.8 7.8 0 0 0-1.73 1L5 3.28a.5.5 0 0 0-.64.2L2.46 6.77a.5.5 0 0 0 .1.68L4.6 9a7.7 7.7 0 0 0 0 2l-2.04 1.55a.5.5 0 0 0-.1.68l1.9 3.29c.13.22.4.3.64.2l2.35-.95c.53.4 1.1.74 1.73 1l.35 2.54c.04.24.25.43.5.43h3.8c.25 0 .46-.19.5-.43l.35-2.54c.63-.26 1.2-.6 1.73-1l2.35.95c.24.1.51.02.64-.2l1.9-3.29a.5.5 0 0 0-.1-.68L19.4 13Z"/></svg>
    </button>
  </div>

  <dialog id="settingsDlg">
    <form class="dlg grid" method="dialog">
      <h2>Inst√§llningar</h2>
      <label>F√∂retagsnamn
        <input id="inpCo" type="text" placeholder="TH√úRINGER TANNENHOF" />
      </label>
      <label>Spr√•k
        <select id="inpLang">
          <option value="sv">Svenska</option>
          <option value="de">Deutsch</option>
          <option value="en">English</option>
        </select>
      </label>
      <label>Tidsv√§ljare
        <select id="inpPicker">
          <option value="system">Systemets klocka</option>
          <option value="list15">Lista (15 min)</option>
        </select>
      </label>
      <label>Vattenst√§mpel (logga)
        <input id="inpWm" type="file" accept="image/*" />
        <div class="hint">L√§gg egen logga (PNG/JPG). Knappen nedan justerar styrkan.</div>
      </label>
      <label>Opacitet vattenst√§mpel: <span id="wmPct">70%</span>
        <input id="inpWmAlpha" type="range" min="0" max="100" value="70" />
      </label>
      <label>Tema
        <select id="inpTheme">
          <option value="green">Gr√∂nt (standard)</option>
          <option value="camo">Milit√§r kamouflage</option>
          <option value="custom">Egna f√§rger</option>
        </select>
      </label>
      <label id="customColorRow" style="display:none">Prim√§rf√§rg (egna)
        <input id="inpCustom" type="color" value="#195c37" />
      </label>
      <label>Text p√• projekt-knappen
        <input id="inpProjSv" type="text" placeholder="Projekt/plats" />
        <div class="hint">√ñvers√§tts automatiskt, men du kan skriva egen text.</div>
      </label>
      <menu style="display:flex;gap:10px;justify-content:flex-end;margin:8px 0 0 0">
        <button value="cancel">St√§ng</button>
        <button id="saveBtn" value="default">Spara</button>
      </menu>
    </form>
  </dialog>

  <!-- Kamera/Foto meny -->
  <dialog id="photoDlg">
    <div class="dlg">
      <h2>Foto</h2>
      <div class="menu">
        <button id="doCamera">üì∑ Ta foto</button>
        <button id="doGallery">üñºÔ∏è V√§lj fr√•n galleri</button>
        <button id="doView">üßê Visa senaste foto</button>
      </div>
      <menu style="display:flex;justify-content:flex-end"><button id="closePhoto">St√§ng</button></menu>
    </div>
  </dialog>
  <input id="fileCamera" type="file" accept="image/*" capture="environment" style="display:none" />
  <input id="fileGallery" type="file" accept="image/*" style="display:none" />

<script>
/* =========================================================
   PERMANENT LAGRING (versionss√§ker)
   ========================================================= */
const APP_VERSION = "1.0.0";
const STORE_KEY   = "tt_timesheet_store";

const Persist = {
  load(){
    const raw = localStorage.getItem(STORE_KEY);
    if(raw){
      const wrap = JSON.parse(raw);
      return migrateIfNeeded(wrap).data;
    }
    // Bak√•tkompat.
    const legacy = localStorage.getItem("tt_state");
    if(legacy){
      const data = JSON.parse(legacy);
      return migrateIfNeeded({version:"0.9.0", data}).data;
    }
    return defaultState();
  },
  save(data){
    localStorage.setItem(STORE_KEY, JSON.stringify({version:APP_VERSION, data}));
  }
};

function defaultState(){
  const rows={};
  for(let d=1; d<=31; d++) rows[d]={from:"", to:"", brk:"00:00", proj:"", photo:null, total:"0:00"};
  return {
    lang:"sv",
    picker:"system",
    theme:"green",
    customColor:"#195c37",
    company:"TH√úRINGER TANNENHOF",
    projText:{sv:"Projekt/plats",de:"Projekt/Ort",en:"Project/site"},
    wmData:null, wmOpacity:70,
    rows
  };
}
function semverLt(a,b){const pa=a.split(".").map(Number),pb=b.split(".").map(Number);for(let i=0;i<3;i++){if((pa[i]||0)!==(pb[i]||0))return (pa[i]||0)<(pb[i]||0)}return false}
function migrateIfNeeded(w){let {version,data}=w;
  if(semverLt(version,"1.0.0")){
    data.theme ||= "green";
    data.customColor ||= "#195c37";
    data.company ||= "TH√úRINGER TANNENHOF";
    data.projText ||= {sv:"Projekt/plats",de:"Projekt/Ort",en:"Project/site"};
    Object.values(data.rows||{}).forEach(r=>{ if(!r.brk) r.brk="00:00"; if(!r.total) r.total="0:00"; });
    version="1.0.0";
  }
  return {version,data};
}

/* =========================================================
   TEXT / SPR√ÖK
   ========================================================= */
const TXT={
  sv:{title:"Th√ºringer Tannenhof ‚Äì Tidstabell", sum:"Totalt ‚Äì", day:"Dag", from:"Fr√•n", to:"Till", break:"Paus", proj:"Projekt/plats"},
  de:{title:"Tannenhofs Zeittabelle", sum:"Gesamt ‚Äì", day:"Tag", from:"Von", to:"Bis", break:"Pause", proj:"Projekt/Ort"},
  en:{title:"Thuringer Tannenhof ‚Äì Timesheet", sum:"Total ‚Äì", day:"Day", from:"From", to:"To", break:"Break", proj:"Project/site"}
};

/* =========================================================
   DOM + STATE
   ========================================================= */
let S = Persist.load();

const el = {
  brandLogo: $("#brandLogo"),
  brandTitle: $("#brandTitle"),
  sumTitle: $("#sumTitle"),
  sumHours: $("#sumHours"),
  rows: $("#rows"),
  thead: $("#thead"),
  wm: $("#wm"),
  wmImg: $("#wmImg"),
  settingsDlg: $("#settingsDlg"),
  photoDlg: $("#photoDlg"),
  fileCamera: $("#fileCamera"),
  fileGallery: $("#fileGallery"),

  // settings inputs
  inpCo: $("#inpCo"),
  inpLang: $("#inpLang"),
  inpPicker: $("#inpPicker"),
  inpWm: $("#inpWm"),
  inpWmAlpha: $("#inpWmAlpha"),
  wmPct: $("#wmPct"),
  inpTheme: $("#inpTheme"),
  inpCustom: $("#inpCustom"),
  customColorRow: $("#customColorRow"),
  inpProjSv: $("#inpProjSv")
};
function $(q){return document.querySelector(q)}

/* =========================================================
   BYGG TABELLEN
   ========================================================= */
function build(){
  // spr√•k
  const t = TXT[S.lang] || TXT.sv;
  document.title = t.title;
  el.brandTitle.textContent = t.title;
  el.sumTitle.textContent = `${t.sum}`;
  $("#thDay").textContent = t.day;
  $("#thFrom").innerHTML = `‚è∞ ${t.from}`;
  $("#thTo").innerHTML = `‚è∞ ${t.to}`;
  $("#thBreak").innerHTML = `‚òï ${t.break}`;

  // tema
  document.body.dataset.theme = (S.theme==="custom" ? "green" : S.theme);
  if(S.theme==="custom"){
    document.documentElement.style.setProperty('--primary', S.customColor);
    document.documentElement.style.setProperty('--primary-2', S.customColor);
  }

  // brand text och vattenst√§mpel
  el.inpCo.value = S.company || "";
  // vattenst√§mpel
  if(S.wmData){ el.wmImg.src = S.wmData; } else { el.wmImg.removeAttribute("src"); }
  setWmOpacity(S.wmOpacity);

  // rensa rader
  el.rows.innerHTML = "";

  const today = new Date();
  const isThisMonth = true; // tabellen visar alltid aktuell m√•nad i din app
  const todayDate = today.getDate();

  for(let d=1; d<=31; d++){
    const r = S.rows[d] || (S.rows[d]={from:"",to:"",brk:"00:00",proj:"",photo:null,total:"0:00"});

    const row = document.createElement("div");
    row.className = "row";
    if(isThisMonth && d===todayDate) row.classList.add("today");

    // Dag
    const cDay = div("cell day", String(d).padStart(2,"0"));

    // Fr√•n / Till
    const cFrom = timeCell(d, "from", r.from);
    const cTo   = timeCell(d, "to",   r.to);

    // Paus
    const cBreak = document.createElement("div");
    cBreak.className="cell time";
    const br = document.createElement("input");
    br.type = (S.picker==="system") ? "time" : "text";
    if(S.picker==="system"){ br.step=900; br.value = r.brk ?? "00:00"; }
    else { br.readOnly=true; br.value=r.brk ?? "00:00"; br.addEventListener('click',()=>chooseFromList(br,[...list15()],'00:00', (v)=>setBreak(d,v))); }
    br.addEventListener("change", ()=> setBreak(d, br.value));
    cBreak.append(br);

    // Total
    const cTotal = div("cell total", toHHMM(totalMinutes(d)));

    // Actions (projekt + kamera)
    const cAct = document.createElement("div"); cAct.className="act";
    const editBtn = iconBtn(pencilSvg(), ()=>editProject(d));
    const camBtn  = iconBtn(cameraSvg(), ()=>openPhotoMenu(d));
    cAct.append(editBtn, camBtn);

    row.append(cDay,cFrom,cTo,cBreak,cTotal);
    // projekt-knapp som cell (ers√§tt g√§rna med egen knapp-rad om du vill)
    const projCell = div("cell proj", "");
    projCell.innerHTML = `<span class="pin">üìç</span><span id="ptext-${d}">${(S.projText?.[S.lang]||t.proj)}</span>`;
    // l√§gg mellan Dag och From? I din layout l√•g den separat, men vi h√•ller det som knapprad nedanf√∂r:
    const row2 = document.createElement("div");
    row2.className="row"; row2.style.borderBottom="1px solid #eef3f0";
    row2.append(div("cell"), projCell, div("cell"), div("cell"), cAct);

    el.rows.append(row, row2);
  }
  updateSum();
}
function div(cls,txt){const e=document.createElement("div"); e.className=cls; if(txt!=null)e.textContent=txt; return e;}
function iconBtn(svg, fn){const b=document.createElement("button"); b.className="iconbtn"; b.innerHTML=svg; b.addEventListener("click",fn); return b;}
function pencilSvg(){return `<svg width="22" height="22" viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25Zm18.71-11.04c.39-.39.39-1.02 0-1.41l-2.5-2.5a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.99-1.67Z"/></svg>`}
function cameraSvg(){return `<svg width="22" height="22" viewBox="0 0 24 24"><path d="M9 3l-1.8 2H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-3.2L15 3H9Zm3 5a5 5 0 1 1 0 10 5 5 0 0 1 0-10Z"/></svg>`}

/* ====== tidcell med systemklocka eller lista ====== */
function timeCell(day, key, val){
  const c = document.createElement("div"); c.className="cell time";
  const inp = document.createElement("input");
  if(S.picker==="system"){
    inp.type="time"; inp.step=300; inp.value = val||"";
    inp.addEventListener("change", ()=> setTime(day,key,inp.value));
  }else{
    inp.type="text"; inp.readOnly=true; inp.value = val||"--:--";
    inp.addEventListener("click", ()=> chooseFromList(inp, [...listTime()], "--:--", (v)=>setTime(day,key,v)));
  }
  c.append(inp);
  return c;
}
function listTime(){
  const a=[]; for(let h=0; h<24; h++){ for(let m=0;m<60;m+=15){ a.push(`${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}`); } }
  return a;
}
function list15(){
  const a=[]; for(let h=0; h<12; h++){ for(let m=0;m<60;m+=15){ a.push(`${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}`); } }
  return a;
}
function chooseFromList(target, options, empty, onPick){
  const dlg = document.createElement("dialog");
  dlg.innerHTML = `<div class="dlg" style="max-height:70vh;overflow:auto"><h2>V√§lj</h2></div>`;
  const box = dlg.firstChild;
  options.forEach(v=>{
    const b=document.createElement("button");
    b.textContent=v; b.style.display="block"; b.style.width="100%"; b.style.padding="10px"; b.style.border="none"; b.style.background="#fff"; b.addEventListener("click",()=>{ onPick(v); dlg.close(); dlg.remove();});
    box.append(b);
  });
  const foot=document.createElement("menu"); foot.style.display="flex"; foot.style.justifyContent="flex-end";
  const close=document.createElement("button"); close.textContent="St√§ng"; close.addEventListener("click",()=>{dlg.close(); dlg.remove();});
  foot.append(close); box.append(foot);
  document.body.append(dlg); dlg.showModal();
}

/* ====== set-funktioner + total ====== */
function toMin(s){ if(!s||s==="--:--") return 0; const [h,m]=s.split(":").map(Number); return h*60+m; }
function toHHMM(mins){ const h=Math.floor(mins/60), m=mins%60; return `${String(h).padStart(1,"0")}:${String(m).padStart(2,"0")}`; }
function totalMinutes(d){
  const r=S.rows[d]; const a=toMin(r.from), b=toMin(r.to), br=toMin(r.brk||"0:00");
  const t=Math.max(0, b-a-br); r.total = toHHMM(t); return t;
}
function updateRowTotal(d){ const idx=(d-1)*2; const row = el.rows.children[idx]; if(!row) return;
  const totalCell = row.querySelector(".total"); totalCell.textContent = toHHMM(totalMinutes(d)); Persist.save(S); updateSum();
}
function updateSum(){ let sum=0; for(let d=1; d<=31; d++) sum+= totalMinutes(d); el.sumHours.textContent = (sum/60).toFixed(2); }

function setTime(d,key,val){ S.rows[d][key]=val; updateRowTotal(d); }
function setBreak(d,val){ S.rows[d].brk = val||"00:00"; updateRowTotal(d); }

/* ====== Projekt ====== */
function editProject(d){
  const t = TXT[S.lang] || TXT.sv;
  const cur = S.rows[d].proj || "";
  const v = prompt(`${t.proj}`, cur);
  if(v!=null){ S.rows[d].proj=v; Persist.save(S); const pt = $("#ptext-"+d); if(pt) pt.textContent=v || (S.projText?.[S.lang]||t.proj); }
}

/* ====== Foto ====== */
let currentPhotoDay=null;
function openPhotoMenu(d){ currentPhotoDay=d; el.photoDlg.showModal(); }
$("#doCamera").addEventListener("click", ()=>{ el.fileCamera.click(); });
$("#doGallery").addEventListener("click", ()=>{ el.fileGallery.click(); });
$("#doView").addEventListener("click", ()=>{
  const r=S.rows[currentPhotoDay]; if(r?.photo){ const w=window.open(); w.document.write(`<img src="${r.photo}" style="max-width:100%">`); }
});
$("#closePhoto").addEventListener("click", ()=> el.photoDlg.close());
el.fileCamera.addEventListener("change", handlePhoto);
el.fileGallery.addEventListener("change", handlePhoto);

function handlePhoto(ev){
  const f = ev.target.files?.[0]; if(!f) return;
  const rd=new FileReader();
  rd.onload = ()=>{ if(currentPhotoDay!=null){ S.rows[currentPhotoDay].photo = rd.result; Persist.save(S); } el.photoDlg.close(); ev.target.value=""; };
  rd.readAsDataURL(f);
}

/* ====== Inst√§llningar ====== */
$("#openSettings").addEventListener("click", ()=>{
  el.inpCo.value = S.company||"";
  el.inpLang.value = S.lang;
  el.inpPicker.value = S.picker;
  el.inpWmAlpha.value = S.wmOpacity; el.wmPct.textContent = S.wmOpacity+"%";
  el.inpTheme.value = S.theme;
  el.customColorRow.style.display = (S.theme==="custom")?"block":"none";
  el.inpCustom.value = S.customColor||"#195c37";
  el.inpProjSv.value = S.projText?.sv || "Projekt/plats";
  el.settingsDlg.showModal();
});
el.inpTheme.addEventListener("change", ()=>{
  el.customColorRow.style.display = (el.inpTheme.value==="custom")?"block":"none";
});
el.inpWm.addEventListener("change", (e)=>{
  const f=e.target.files?.[0]; if(!f) return;
  const rd=new FileReader();
  rd.onload=()=>{ S.wmData=rd.result; Persist.save(S); el.wmImg.src=rd.result; };
  rd.readAsDataURL(f);
});
el.inpWmAlpha.addEventListener("input", ()=>{ el.wmPct.textContent = el.inpWmAlpha.value+"%"; setWmOpacity(+el.inpWmAlpha.value); });
$("#saveBtn").addEventListener("click", ()=>{
  S.company = el.inpCo.value.trim() || "TH√úRINGER TANNENHOF";
  S.lang    = el.inpLang.value;
  S.picker  = el.inpPicker.value;
  S.theme   = el.inpTheme.value;
  S.customColor = el.inpCustom.value;
  S.projText.sv = el.inpProjSv.value.trim() || "Projekt/plats";
  Persist.save(S);
  el.settingsDlg.close();
  applyBrand();
  build();
});

function setWmOpacity(p){ S.wmOpacity = p; document.documentElement.style.setProperty('--wmalpha', (p/100).toString()); Persist.save(S); }
function applyBrand(){ el.brandLogo.style.backgroundImage = S.wmData?`url(${S.wmData})`:""; }

/* ====== Delning / PDF (stubbar) ====== */
$("#shareBtn").addEventListener("click", ()=> alert("Dela/Skicka ‚Äì implementera enligt dina behov (export JSON/PDF)."));
$("#pdfBtn").addEventListener("click", ()=> alert("PDF ‚Äì h√§r kan du koppla in html2pdf senare."));

/* ====== Init ====== */
applyBrand();
build();
</script>
</body>
</html>
