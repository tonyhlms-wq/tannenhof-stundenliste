<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tannenhofs tidtabell</title>

  <!-- PWA / ikoner som du redan lagt till i repot -->
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="favicon.ico">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">

  <style>
    :root{
      --green:#2f6b39;
      --green-2:#3a7d46;
      --bg:#f4f8f4;
      --text:#2a3e2a;
      --muted:#7a8b7a;
      --row:#ffffff;
      --row-alt:#f1f6f1;
      --accent:#e7f2e8;
      --danger:#a33;
      --shadow:0 8px 20px rgba(0,0,0,.08);
      --radius:14px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
    .appbar{
      position:sticky; top:0; z-index:20;
      display:flex; align-items:center; gap:14px;
      padding:14px 18px; background:var(--green); color:#fff; box-shadow:var(--shadow);
    }
    .brand{
      display:flex; align-items:center; gap:10px; min-width:0;
    }
    .brand-logo{
      width:38px; height:38px; border-radius:8px; background:#fff; display:grid; place-items:center; overflow:hidden;
    }
    .brand-logo img{width:100%; height:100%; object-fit:cover}
    .brand-title{font-weight:700; font-size:20px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
    .toolbar{margin-left:auto; display:flex; gap:12px}
    .btn{
      appearance:none; border:0; border-radius:12px; padding:12px 18px; font-weight:650; cursor:pointer;
      background:#fff; color:var(--green); box-shadow:var(--shadow);
    }
    .btn.primary{background:#103d18; color:#fff}
    .container{max-width:860px; margin:16px auto; padding:0 14px}
    .panel{
      background:#fff; border-radius:var(--radius); box-shadow:var(--shadow); overflow:hidden; margin-bottom:14px;
    }
    .panel-body{padding:16px}
    .grid{display:grid; gap:12px}
    .grid.cols-2{grid-template-columns:1fr 1fr}
    .field label{display:block; font-size:13px; color:var(--muted); margin:6px 0}
    .input, select{
      width:100%; height:44px; border:1px solid #dfe7df; border-radius:12px; padding:0 12px; background:#fff; color:var(--text);
    }
    .switch{display:flex; align-items:center; gap:10px; font-size:14px}
    .switch input{width:20px;height:20px}

    /* Tabell */
    .table{width:100%; border-collapse:separate; border-spacing:0 10px}
    .th, .td{padding:8px}
    .row{
      display:grid; grid-template-columns:50px 1fr 1fr 110px 90px 70px; gap:10px; align-items:center;
      background:var(--row); padding:10px; border-radius:12px; box-shadow:var(--shadow);
    }
    .row.alt{background:var(--row-alt)}
    .row .small{font-size:12px; color:var(--muted)}
    .row input[type="time"], .row input[type="text"], .row select{
      height:40px; border-radius:10px; border:1px solid #dfe7df; padding:0 10px; background:#fff; width:100%;
    }
    .row .total{font-weight:700; text-align:center}
    .row .actions{display:flex; justify-content:center}
    .row .note-btn{
      width:44px; height:40px; border-radius:10px; border:0; background:var(--green); color:#fff; cursor:pointer;
      display:grid; place-items:center;
    }
    .row.today{outline:2px solid var(--green-2); background:var(--accent)}
    .sticky-month{
      position:sticky; top:64px; z-index:9; margin:10px 0 6px; padding:6px 10px; font-weight:700; color:var(--green);
      background:linear-gradient(#ecf5ed, #f6faf7); border-radius:10px; box-shadow:var(--shadow);
    }

    /* Antecknings-modal */
    .modal{
      position:fixed; inset:0; display:none; z-index:50; background:rgba(0,0,0,.2);
    }
    .modal.open{display:flex; align-items:flex-end}
    .sheet{
      width:100%; max-height:85%; background:#fff; border-top-left-radius:18px; border-top-right-radius:18px; box-shadow:var(--shadow);
      display:flex; flex-direction:column;
    }
    .sheet header{padding:14px 16px; display:flex; align-items:center; justify-content:space-between; border-bottom:1px solid #eef3ee}
    .sheet h3{margin:0; font-size:16px}
    .sheet textarea, .sheet input[type="text"]{
      width:100%; border:0; outline:0; padding:16px; font-size:16px; resize:none;
    }
    .sheet .row2{display:grid; grid-template-columns:1fr 110px; gap:12px; padding:0 16px 16px}
    .sheet .save{margin:10px 16px 18px; height:46px; border-radius:12px; border:0; background:var(--green); color:#fff; font-weight:700}

    /* Vattenst√§mpel */
    .watermark{
      position:fixed; right:10px; bottom:10px; opacity:.28; pointer-events:none; filter:grayscale(.1);
      width:min(40vw, 220px); user-select:none;
    }

    /* FAB (kugghjul) ‚Äì nu V√ÑNSTER */
    .fab{
      position:fixed; left:16px; bottom:24px; width:62px; height:62px; border-radius:50%;
      background:var(--green); color:#fff; display:grid; place-items:center; box-shadow:var(--shadow); z-index:30; border:0; cursor:pointer;
    }

    /* Inst√§llningspanel (drawer) */
    .drawer{position:fixed; inset:0; display:none; z-index:60; background:rgba(0,0,0,.25)}
    .drawer.open{display:flex}
    .drawer .panel{
      margin-left:0; margin-right:auto; width:min(420px, 92vw); height:100%; border-radius:0;
      display:flex; flex-direction:column;
    }
    .drawer header{padding:14px 16px; background:var(--green); color:#fff; display:flex; align-items:center; justify-content:space-between}
    .drawer .panel-body{overflow:auto; padding-bottom:24px}
    .hint{font-size:12px; color:var(--muted)}
  </style>
</head>
<body>

  <!-- Appbar -->
  <div class="appbar">
    <div class="brand">
      <div class="brand-logo" id="brandLogo"><img id="brandLogoImg" alt=""></div>
      <div>
        <div class="brand-title" id="titleTxt">Tannenhofs tidtabell</div>
        <div class="small" id="subtitleTxt"></div>
      </div>
    </div>
    <div class="toolbar">
      <button class="btn" id="shareBtn" data-i18n="share">Dela / Skicka</button>
      <button class="btn primary" id="printBtn" data-i18n="print">Skriv ut / PDF</button>
    </div>
  </div>

  <div class="container">

    <!-- M√•nadshuvud visas ‚Äústicky‚Äù i listan nedan -->

    <!-- Lista / tabell -->
    <div id="list"></div>
  </div>

  <!-- FAB (inst√§llningar) ‚Äì nu v√§nster -->
  <button class="fab" id="openSettings" aria-label="Inst√§llningar">
    <!-- enkel kugghjulsikon -->
    <svg width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"
      stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="3"></circle>
      <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 5 15.4a1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09A1.65 1.65 0 0 0 4.6 8a1.65 1.65 0 0 0-.33-1.82l-.06-.06A2 2 0 1 1 7.04 3.3l.06.06A1.65 1.65 0 0 0 8.92 3h.09a1.65 1.65 0 0 0 1-1.51V1a2 2 0 1 1 4 0v.09A1.65 1.65 0 0 0 15 2.6a1.65 1.65 0 0 0 1.82.33l.06-.06A2 2 0 1 1 19.7 5.7l-.06.06A1.65 1.65 0 0 0 20 7.58v.09A1.65 1.65 0 0 0 21.51 9H22a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/>
    </svg>
  </button>

  <!-- Inst√§llningar (drawer) -->
  <div class="drawer" id="drawer">
    <div class="panel">
      <header>
        <strong data-i18n="settings">Inst√§llningar</strong>
        <button class="btn" id="closeSettings">St√§ng</button>
      </header>
      <div class="panel-body">
        <div class="grid">
          <div class="field">
            <label data-i18n="company">F√∂retag</label>
            <input class="input" id="company" placeholder="TH√úRINGER TANNENHOF">
          </div>

          <div class="field">
            <label data-i18n="language">Spr√•k</label>
            <select id="lang" class="input">
              <option value="sv">Svenska</option>
              <option value="de">Deutsch</option>
              <option value="en">English</option>
            </select>
          </div>

          <div class="field">
            <label data-i18n="month">M√•nad</label>
            <select id="month" class="input"></select>
          </div>

          <div class="field">
            <label data-i18n="year">√Ör</label>
            <select id="year" class="input"></select>
          </div>

          <div class="field">
            <label data-i18n="logo">Logga (bild eller emoji)</label>
            <input id="logoText" class="input" placeholder="t.ex. üå≤ eller ü¶å">
            <input id="logoFile" class="input" type="file" accept="image/*">
            <div class="hint" data-i18n="logoHint">Sparas lokalt p√• den h√§r enheten.</div>
          </div>

          <div class="field switch">
            <input type="checkbox" id="autosave">
            <label for="autosave" data-i18n="autosave">Autospara</label>
          </div>

          <div class="field switch">
            <input type="checkbox" id="wmToggle">
            <label for="wmToggle" data-i18n="watermark">Visa vattenst√§mpel</label>
          </div>

          <div class="field">
            <label data-i18n="breakDefault">Standardrast (min)</label>
            <select id="defaultBreak" class="input">
              <option value="0">0</option>
              <option value="15">15</option>
              <option value="30">30</option>
            </select>
          </div>

          <div class="field">
            <button class="btn" id="regen" data-i18n="makeDays">Skapa dagar</button>
            <button class="btn" id="clearAll" data-i18n="clear">Rensa allt</button>
          </div>
        </div>
        <p class="hint" style="margin-top:6px" data-i18n="saveHint">Inst√§llningarna sparas lokalt. Appikonen/namnet h√§mtas fr√•n manifestet.</p>
      </div>
    </div>
  </div>

  <!-- Anteckningar / Projekt -->
  <div class="modal" id="noteModal">
    <div class="sheet">
      <header>
        <h3 id="noteTitle">Anteckning</h3>
        <button class="btn" id="closeNote">St√§ng</button>
      </header>
      <div class="row2">
        <input type="text" id="projectInput" placeholder="Projekt / plats">
        <input type="text" id="totalReadonly" readonly class="input" value="0.00 h">
      </div>
      <textarea id="noteText" rows="10" placeholder="Skriv dina anteckningar h√§r..."></textarea>
      <button class="save" id="saveNoteBtn">Spara</button>
    </div>
  </div>

  <!-- Vattenst√§mpel (tre granar) -->
  <img src="tnh-tree-512.png" alt="" class="watermark" id="wmImg" />

  <script>
    /* ---------- Spr√•k ---------- */
    const i18n = {
      sv:{
        title:"Tannenhofs tidtabell", share:"Dela / Skicka", print:"Skriv ut / PDF", settings:"Inst√§llningar",
        company:"F√∂retag", language:"Spr√•k", month:"M√•nad", year:"√Ör", logo:"Logga (bild eller emoji)", logoHint:"Sparas lokalt p√• den h√§r enheten.",
        autosave:"Autospara", watermark:"Visa vattenst√§mpel", breakDefault:"Standardrast (min)",
        makeDays:"Skapa dagar", clear:"Rensa allt", saveHint:"Inst√§llningarna sparas lokalt. Appikonen/namnet h√§mtas fr√•n manifestet.",
        d:"Dag", from:"Fr√•n", to:"Till", brk:"Paus (h:mm)", total:"Totalt (h)", actions:"√Ötg√§rder",
        monthNames:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"]
      },
      de:{
        title:"Tannenhof Stundenliste", share:"Teilen / Senden", print:"Drucken / PDF", settings:"Einstellungen",
        company:"Arbeitgeber", language:"Sprache", month:"Monat", year:"Jahr", logo:"Logo (Bild oder Emoji)", logoHint:"Lokal auf diesem Ger√§t gespeichert.",
        autosave:"Auto-Speichern", watermark:"Wasserzeichen anzeigen", breakDefault:"Standardpause (Min)",
        makeDays:"Tage erstellen", clear:"Alles l√∂schen", saveHint:"Einstellungen werden lokal gespeichert. App-Icon/Name kommt aus dem Manifest.",
        d:"Tag", from:"Von", to:"Bis", brk:"Pause (Std:Min)", total:"Gesamt (Std)", actions:"Aktionen",
        monthNames:["Jan","Feb","M√§r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]
      },
      en:{
        title:"Tannenhof Timesheet", share:"Share / Send", print:"Print / PDF", settings:"Settings",
        company:"Company", language:"Language", month:"Month", year:"Year", logo:"Logo (image or emoji)", logoHint:"Stored locally on this device.",
        autosave:"Autosave", watermark:"Show watermark", breakDefault:"Default break (min)",
        makeDays:"Generate days", clear:"Clear all", saveHint:"Settings are saved locally. App icon/name come from the manifest.",
        d:"Day", from:"From", to:"To", brk:"Break (h:mm)", total:"Total (h)", actions:"Actions",
        monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]
      }
    };

    /* ---------- State & storage ---------- */
    const S = {
      lang: localStorage.getItem("tnh.lang") || "sv",
      company: localStorage.getItem("tnh.company") || "TH√úRINGER TANNENHOF",
      month: +(localStorage.getItem("tnh.month") ?? new Date().getMonth()),
      year: +(localStorage.getItem("tnh.year") ?? new Date().getFullYear()),
      autosave: localStorage.getItem("tnh.autosave") === "1",
      wm: localStorage.getItem("tnh.wm") !== "0", // p√• som standard
      defaultBreak: +(localStorage.getItem("tnh.defaultBreak") ?? 0),
      logoText: localStorage.getItem("tnh.logoText") || "üå≤üå≤üå≤",
      logoImg: localStorage.getItem("tnh.logoImg") || ""
    };

    const el = s => document.querySelector(s);

    // Fyll selects i drawer
    const monthSel = el("#month");
    const yearSel = el("#year");
    for(let m=0;m<12;m++){ const o=document.createElement("option"); o.value=m; o.textContent=i18n[S.lang].monthNames[m]; monthSel.appendChild(o); }
    const yNow = new Date().getFullYear();
    for(let y=yNow-2; y<=yNow+2; y++){ const o=document.createElement("option"); o.value=y; o.textContent=y; yearSel.appendChild(o); }

    // S√§tt v√§rden i drawer
    el("#lang").value = S.lang;
    monthSel.value = S.month;
    yearSel.value = S.year;
    el("#company").value = S.company;
    el("#autosave").checked = S.autosave;
    el("#wmToggle").checked = S.wm;
    el("#defaultBreak").value = S.defaultBreak;
    el("#logoText").value = S.logoText;

    function saveState(){
      localStorage.setItem("tnh.lang", S.lang);
      localStorage.setItem("tnh.company", S.company);
      localStorage.setItem("tnh.month", S.month);
      localStorage.setItem("tnh.year", S.year);
      localStorage.setItem("tnh.autosave", S.autosave? "1":"0");
      localStorage.setItem("tnh.wm", S.wm? "1":"0");
      localStorage.setItem("tnh.defaultBreak", String(S.defaultBreak));
      localStorage.setItem("tnh.logoText", S.logoText || "");
      if(S.logoImg) localStorage.setItem("tnh.logoImg", S.logoImg);
    }

    /* ---------- UI texter ---------- */
    function applyLang(){
      const L = i18n[S.lang];
      document.getElementById("titleTxt").textContent = L.title;
      document.querySelectorAll("[data-i18n]").forEach(n=>{
        const k=n.getAttribute("data-i18n"); if(L[k]) n.textContent=L[k];
      });
      render();
    }

    /* ---------- Logo i header ---------- */
    function setHeaderLogo(){
      const img = el("#brandLogoImg");
      if(S.logoImg){
        img.src = S.logoImg; img.style.display="block";
      }else{
        // rita emoji som bild
        const c=document.createElement("canvas"); c.width=128; c.height=128;
        const ctx=c.getContext("2d"); ctx.fillStyle="#ffffff"; ctx.fillRect(0,0,128,128);
        ctx.font="94px 'Segoe UI Emoji','Apple Color Emoji',sans-serif";
        ctx.textAlign="center"; ctx.textBaseline="middle";
        ctx.fillText(S.logoText || "üå≤üå≤üå≤", 64, 72);
        img.src=c.toDataURL(); img.style.display="block";
      }
    }

    /* ---------- Generera dagar ---------- */
    function daysInMonth(y,m){ return new Date(y, m+1, 0).getDate(); }
    function pad(n){ return String(n).padStart(2,"0"); }

    function render(){
      saveState();
      const L=i18n[S.lang];
      el("#subtitleTxt").textContent = `${L.monthNames[S.month]} ${S.year}`;

      const list = el("#list");
      list.innerHTML = "";

      // Sticky m√•nadshuvud
      const mh = document.createElement("div");
      mh.className = "sticky-month";
      mh.textContent = `${L.total.replace('(h)','')} ‚Äì ${L.monthNames[S.month]} ${S.year}`; // bara en mjuk etikett
      list.appendChild(mh);

      const nDays = daysInMonth(S.year,S.month);
      const today = new Date();
      const isThisMonth = (today.getFullYear()===S.year && today.getMonth()===S.month);
      let todayEl=null;

      for(let d=1; d<=nDays; d++){
        const row = document.createElement("div");
        row.className = "row" + (d%2===0? " alt":"");
        if(isThisMonth && d===today.getDate()){ row.classList.add("today"); todayEl=row; }

        const day = document.createElement("div"); day.style.textAlign="center"; day.innerHTML = `<div>${d}</div>`;
        const from = document.createElement("input"); from.type="time"; from.step=300;
        const to   = document.createElement("input"); to.type="time"; to.step=300;

        const brkWrap = document.createElement("div");
        const brkSel = document.createElement("select");
        [0,15,30,45,60].forEach(min=>{ const o=document.createElement("option"); o.value=min; o.textContent= (min===0?"0:00":`${Math.floor(min/60)}:${pad(min%60)}`); brkSel.appendChild(o); });
        brkSel.value = S.defaultBreak;
        brkWrap.appendChild(brkSel);

        const total = document.createElement("div"); total.className="total"; total.textContent="0.00";

        const act = document.createElement("div"); act.className="actions";
        const noteBtn = document.createElement("button"); noteBtn.className="note-btn"; noteBtn.innerHTML="üìù"; act.appendChild(noteBtn);

        // grid-ordning
        row.append(day, from, to, brkWrap, total, act);
        list.appendChild(row);

        // last state
        const key = `tnh.d${S.year}-${S.month}-${d}`;
        const saved = localStorage.getItem(key);
        if(saved){
          const obj=JSON.parse(saved);
          from.value=obj.from||"";
          to.value=obj.to||"";
          brkSel.value = obj.brk ?? S.defaultBreak;
          total.textContent=obj.total||"0.00";
          row.dataset.note = obj.note||"";
          row.dataset.project = obj.project||"";
        }

        function recalc(){
          const parse = t => {
            if(!t) return null;
            const [H,M]=t.split(":").map(n=>+n);
            return H*60+M;
          };
          const a=parse(from.value), b=parse(to.value);
          let tot=0;
          if(a!=null && b!=null){
            tot = (b-a) - (+brkSel.value);
            if(tot<0) tot=0;
          }
          const h = Math.floor(tot/60), m=tot%60;
          total.textContent = (h + (m/60)).toFixed(2);
          if(S.autosave){
            localStorage.setItem(key, JSON.stringify({
              from:from.value, to:to.value, brk:+brkSel.value, total:total.textContent,
              note:row.dataset.note||"", project:row.dataset.project||""
            }));
          }
        }
        from.addEventListener("change", recalc);
        to.addEventListener("change", recalc);
        brkSel.addEventListener("change", recalc);

        // anteckningsmodal
        noteBtn.addEventListener("click", ()=>{
          openNote(d, row, total.textContent);
        });
      }

      // scrolla till idag
      if(todayEl){
        setTimeout(()=> todayEl.scrollIntoView({behavior:"smooth", block:"center"}), 0);
      }

      // vattenst√§mpel synlighet
      el("#wmImg").style.display = S.wm ? "block" : "none";

      // uppdatera header-text
      document.title = i18n[S.lang].title;
      setHeaderLogo();
    }

    /* ---------- Note modal ---------- */
    let noteRowRef=null, noteDay=0;
    function openNote(day, row, totalStr){
      noteRowRef=row; noteDay=day;
      el("#noteTitle").textContent = `${i18n[S.lang].d} ${day}`;
      el("#noteText").value = row.dataset.note || "";
      el("#projectInput").value = row.dataset.project || "";
      el("#totalReadonly").value = `${totalStr} h`;
      el("#noteModal").classList.add("open");
    }
    el("#closeNote").onclick = ()=> el("#noteModal").classList.remove("open");
    el("#saveNoteBtn").onclick = ()=>{
      if(!noteRowRef) return;
      const note = el("#noteText").value;
      const project = el("#projectInput").value;
      noteRowRef.dataset.note = note;
      noteRowRef.dataset.project = project;

      // autospara
      const key = `tnh.d${S.year}-${S.month}-${noteDay}`;
      const saved = localStorage.getItem(key);
      const obj = saved? JSON.parse(saved) : {};
      obj.note = note; obj.project = project;
      localStorage.setItem(key, JSON.stringify(obj));

      el("#noteModal").classList.remove("open");
    };

    /* ---------- Drawer h√§ndelser ---------- */
    const drawer = el("#drawer");
    el("#openSettings").onclick = ()=> drawer.classList.add("open");
    el("#closeSettings").onclick = ()=> drawer.classList.remove("open");

    el("#lang").addEventListener("change", e=>{ S.lang=e.target.value; saveState(); // byt m√•nadsnamn i select
      monthSel.innerHTML=""; i18n[S.lang].monthNames.forEach((n,i)=>{const o=document.createElement("option"); o.value=i; o.textContent=n; monthSel.appendChild(o);});
      monthSel.value=S.month; applyLang();
    });
    monthSel.addEventListener("change", e=>{ S.month=+e.target.value; applyLang(); });
    yearSel.addEventListener("change", e=>{ S.year=+e.target.value; applyLang(); });
    el("#company").addEventListener("input", e=>{ S.company=e.target.value; saveState(); });
    el("#autosave").addEventListener("change", e=>{ S.autosave=e.target.checked; saveState(); });
    el("#wmToggle").addEventListener("change", e=>{ S.wm=e.target.checked; saveState(); render(); });
    el("#defaultBreak").addEventListener("change", e=>{ S.defaultBreak=+e.target.value; saveState(); render(); });

    el("#logoText").addEventListener("input", e=>{ S.logoText=e.target.value; saveState(); setHeaderLogo(); });
    el("#logoFile").addEventListener("change", e=>{
      const f=e.target.files[0]; if(!f) return;
      const r=new FileReader(); r.onload=()=>{ S.logoImg=r.result; saveState(); setHeaderLogo(); }; r.readAsDataURL(f);
    });

    el("#regen").onclick = ()=> render();
    el("#clearAll").onclick = ()=>{
      if(confirm("Rensa alla v√§rden f√∂r denna m√•nad?")){
        const n=daysInMonth(S.year,S.month);
        for(let d=1; d<=n; d++) localStorage.removeItem(`tnh.d${S.year}-${S.month}-${d}`);
        render();
      }
    };

    /* ---------- Dela / Skriv ut ---------- */
    el("#shareBtn").onclick = async ()=>{
      try{
        const url = location.href;
        if(navigator.share){
          await navigator.share({title:document.title, text:S.company, url});
        }else{
          await navigator.clipboard.writeText(url);
          alert("L√§nk kopierad.");
        }
      }catch(e){}
    };
    el("#printBtn").onclick = ()=> window.print();

    /* ---------- Init ---------- */
    applyLang();
  </script>
</body>
</html>
